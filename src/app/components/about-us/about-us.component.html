<section
  class="relative flex flex-col items-center justify-center px-6 py-20 text-center bg-[url('/assets/textures/projection-noise.jpg')] bg-cover bg-fixed bg-center overflow-hidden"
>
    <!-- GIFS (desktop + mobile) -->
    <div class="absolute inset-0 w-full h-full z-0 pointer-events-none">
      <!-- DESKTOP WALL (tus posiciones absolutas originales) -->
      <div class="gif-desktop">
        <!-- FILA SUPERIOR -->
        <img
          src="https://media.giphy.com/media/l1J9CteX3i48gWDSw/giphy.gif"
          class="gif-abs"
          style="top: 5%; left: 5%; width: 18%"
        />
        <img
          src="https://media.giphy.com/media/gHcPh3ehbRGik/giphy.gif"
          class="gif-abs"
          style="top: 5%; left: 20%; width: 18%"
        />
        <img
          src="https://media.giphy.com/media/K4ppHUZTYKJYk/giphy.gif"
          class="gif-abs"
          style="top: 5%; left: 55%; width: 18%"
        />
        <img
          src="https://media.giphy.com/media/cnSWVufZ9AXmgCoYMz/giphy.gif"
          class="gif-abs"
          style="top: 5%; left: 80%; width: 18%"
        />

        <!-- FILA MEDIO-ALTA -->
        <img
          src="https://media.giphy.com/media/406XmAQsBhEEpRKwFt/giphy.gif"
          class="gif-abs"
          style="top: 25%; left: 10%; width: 17%"
        />
        <img
          src="https://media.giphy.com/media/lSgdEyAeAbExW/giphy.gif"
          class="gif-abs"
          style="top: 25%; left: 35%; width: 18%"
        />
        <img
          src="https://media.giphy.com/media/31liAeCE1humI/giphy.gif"
          class="gif-abs"
          style="top: 25%; left: 60%; width: 20%"
        />
        <img
          src="https://media.giphy.com/media/26Ffhespo1GwMiEc8/giphy.gif"
          class="gif-abs"
          style="top: 25%; left: 85%; width: 15%"
        />

        <!-- FILA CENTRAL -->
        <img
          src="https://media.giphy.com/media/MMnDgPw0yB6ms/giphy.gif"
          class="gif-abs"
          style="top: 45%; left: 10%; width: 20%"
        />
        <img
          src="https://media.giphy.com/media/3oKGzzv8fjcLzXAEXC/giphy.gif"
          class="gif-abs"
          style="top: 45%; left: 35%; width: 20%"
        />
        <img
          src="https://media.giphy.com/media/UtkJymPFT6LyE/giphy.gif"
          class="gif-abs"
          style="top: 45%; left: 60%; width: 20%"
        />
        <img
          src="https://media.giphy.com/media/q22e4mDR713La/giphy.gif"
          class="gif-abs"
          style="top: 45%; left: 85%; width: 20%"
        />

        <!-- FILA INFERIOR -->
        <img
          src="https://media.giphy.com/media/HZpCCbcWc0a3u/giphy.gif"
          class="gif-abs"
          style="top: 65%; left: 5%; width: 17%"
        />
        <img
          src="https://media.giphy.com/media/SxMMNyNTMGw2uwqSNl/giphy.gif"
          class="gif-abs"
          style="top: 65%; left: 30%; width: 18%"
        />
        <img
          src="https://media.giphy.com/media/10A9fGbf7E3eBa/giphy.gif"
          class="gif-abs"
          style="top: 65%; left: 55%; width: 15%"
        />
        <img
          src="https://media.giphy.com/media/4LTGEdPueINFzycY1Ixq/giphy.gif"
          class="gif-abs"
          style="top: 65%; left: 80%; width: 17%"
        />

        <!-- FILA ABAJO DEL TODO -->
        <img
          src="https://media.giphy.com/media/q3uDB1eaA2jEk/giphy.gif"
          class="gif-abs"
          style="top: 85%; left: 10%; width: 20%"
        />
        <img
          src="https://media.giphy.com/media/5xaOcLKOuFcRVrKCSJO/giphy.gif"
          class="gif-abs"
          style="top: 85%; left: 30%; width: 18%"
        />
        <img
          src="https://media.giphy.com/media/vArNfZSyp8v6/giphy.gif"
          class="gif-abs"
          style="top: 85%; left: 50%; width: 15%"
        />
        <img
          src="https://media.giphy.com/media/YVe7IfmGZVmEM/giphy.gif"
          class="gif-abs"
          style="top: 85%; left: 70%; width: 18%"
        />
        <img
          src="https://media.giphy.com/media/Fm2nuxTGfKa1q/giphy.gif"
          class="gif-abs"
          style="top: 85%; left: 90%; width: 18%"
        />
      </div>

      <!-- MOBILE GRID VERSION -->
      <div class="gif-mobile">
        <!-- GIFS -->
        <img src="https://media.giphy.com/media/l1J9CteX3i48gWDSw/giphy.gif" />
        <img src="https://media.giphy.com/media/gHcPh3ehbRGik/giphy.gif" />
        <img src="https://media.giphy.com/media/K4ppHUZTYKJYk/giphy.gif" />
        <img src="https://media.giphy.com/media/cnSWVufZ9AXmgCoYMz/giphy.gif" />

        <img src="https://media.giphy.com/media/406XmAQsBhEEpRKwFt/giphy.gif" />
        <img src="https://media.giphy.com/media/lSgdEyAeAbExW/giphy.gif" />
        <img src="https://media.giphy.com/media/31liAeCE1humI/giphy.gif" />
        <img src="https://media.giphy.com/media/26Ffhespo1GwMiEc8/giphy.gif" />

        <img src="https://media.giphy.com/media/MMnDgPw0yB6ms/giphy.gif" />
        <img src="https://media.giphy.com/media/3oKGzzv8fjcLzXAEXC/giphy.gif" />
        <img src="https://media.giphy.com/media/UtkJymPFT6LyE/giphy.gif" />
        <img src="https://media.giphy.com/media/q22e4mDR713La/giphy.gif" />

        <img src="https://media.giphy.com/media/HZpCCbcWc0a3u/giphy.gif" />
        <img src="https://media.giphy.com/media/SxMMNyNTMGw2uwqSNl/giphy.gif" />
        <img src="https://media.giphy.com/media/10A9fGbf7E3eBa/giphy.gif" />
        <img
          src="https://media.giphy.com/media/4LTGEdPueINFzycY1Ixq/giphy.gif"
        />

        <img src="https://media.giphy.com/media/q3uDB1eaA2jEk/giphy.gif" />
        <img
          src="https://media.giphy.com/media/5xaOcLKOuFcRVrKCSJO/giphy.gif"
        />
        <img src="https://media.giphy.com/media/vArNfZSyp8v6/giphy.gif" />
        <img src="https://media.giphy.com/media/YVe7IfmGZVmEM/giphy.gif" />
        <img src="https://media.giphy.com/media/Fm2nuxTGfKa1q/giphy.gif" />
      </div>
    </div>

    <div
      class="relative w-[24rem] h-[34rem] bg-black rounded-xl border-[6px] border-[#444] shadow-2xl overflow-visible"
    >
      <img
        class="absolute -top-7 -left-10 w-24 rotate-[-4deg] z-40"
        src="/assets/images/pngwing.com.png"
        alt="fiso"
      />
      <img
        class="absolute -top-6 -right-6 w-24 rotate-[-70deg] z-40"
        src="/assets/images/pngwing.com.png"
        alt="fiso"
      />

      <div class="w-full h-full relative">
        @for (photo of photos; let i = $index; track photo.src) {
        <div
          class="absolute top-0 left-0 w-full h-full transition-opacity duration-500 ease-in-out"
          [ngClass]="{
            'opacity-100 z-10': i === currentIndex,
            'opacity-0 z-0': i !== currentIndex
          }"
        >
          <img
            [src]="photo.src"
            class="w-full h-full object-cover grayscale-[25%] contrast-125 brightness-90 saturate-50"
          />
          <div
            class="absolute inset-0 pointer-events-none bg-[url('/assets/textures/grain.png')] bg-cover opacity-10 mix-blend-soft-light"
          ></div>
        </div>
        }
      </div>

      <button
        class="absolute top-1/2 left-1.5 -translate-y-1/2 z-40 cursor-pointer bg-yellow-200/80 text-black text-xl font-bold px-3 py-1 rounded-full shadow-md hover:bg-yellow-300 transition-all animate-pulse md:animate-bounce"
        (click)="prevPhoto()"
      >
        ←
      </button>

      <button
        class="absolute top-1/2 right-1.5 -translate-y-1/2 z-40 cursor-pointer bg-yellow-200/80 text-black text-xl font-bold px-3 py-1 rounded-full shadow-md hover:bg-yellow-300 transition-all animate-pulse md:animate-bounce"
        (click)="nextPhoto()"
      >
        →
      </button>

      <div
        class="absolute bottom-2 left-3 text-yellow-400 text-xs font-mono opacity-70 z-30"
      >
        Kodak · Ektachrome 100
      </div>
    </div>

    <div class="relative">
      <img
        class="absolute -top-4 -left-10 w-30 -rotate-20 z-40"
        src="/assets/images/superPop.png"
        alt="superpop"
      />

      <div
        class="bg-[#f9f4e8] mt-10 p-6 rounded-xl shadow-inner border border-yellow-300 w-full max-w-lg font-retro text-gray-800 leading-relaxed text-left"
      >
        <h3 class="text-2xl font-bold mb-4">Nuestra historia</h3>
        <div [innerHTML]="formatText(photos[currentIndex]?.text)"></div>
      </div>
    </div>
</section>
